<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Green World | Login</title>
  <link rel="stylesheet" href="loginpage.css">
</head>
<body>

  <div class="login-container">
    <h1>üåç Green World</h1>
    <p>Protect nature. Login to continue.</p>

    <!-- Email & Password -->
    <input type="email" id="email" placeholder="Email" />
    <input type="password" id="password" placeholder="Password" />

    <!-- Login button -->
    <button id="loginBtn">Login</button>

    <!-- Message placeholder -->
    <p id="loginMsg" class="small"></p>

    <!-- Switch to sign up -->
    <p class="small">
      Don‚Äôt have an account?
      <a href="./createaccount page.html">Create one</a>
    </p>
  </div> 

  <!-- Firebase + Auth JS -->
  <script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getAuth, signInWithEmailAndPassword, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

// Firebase config (replace with your project info)
const firebaseConfig = {
   apiKey: "AIzaSyBnpg1zVQr2-mEPwet80zNExFaPEjls4Hc",
   authDomain: "green-world-project.firebaseapp.com",
   projectId: "green-world-project",
   storageBucket: "green-world-project.firebasestorage.app",
   messagingSenderId: "1096759081626",
   appId: "1:1096759081626:web:1f15a558d2bfcad1b7bd23"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

const loginBtn = document.getElementById("loginBtn");
const emailInput = document.getElementById("email");
const passwordInput = document.getElementById("password");
const loginMsg = document.getElementById("loginMsg");

loginBtn.addEventListener("click", async () => {
  const email = emailInput.value;
  const password = passwordInput.value;

  if (!email || !password) {
    loginMsg.textContent = "Please enter email and password.";
    return;
  }

  try {
    // 1Ô∏è‚É£ Sign in
    const userCred = await signInWithEmailAndPassword(auth, email, password);

    // 2Ô∏è‚É£ Check if email is verified
    if (!userCred.user.emailVerified) {
      // Block login
      await signOut(auth); // immediately sign out
      loginMsg.textContent = "‚ö† Please verify your email before logging in.";
      return;
    }

    // 3Ô∏è‚É£ Email verified ‚Üí login allowed
    loginMsg.textContent = "Login successful ‚úî";
    // redirect to dashboard
    // window.location.href = "dashboard.html";

  } catch (err) {
    loginMsg.textContent = err.message;
  }
});


  </script>
</body>
</html>
